<div class="progress-container">
    <h2>Achievements Progress</h2>

    <table mat-table [dataSource]="achievements" class="mat-elevation-z8">

        <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef>ID</th>
            <td mat-cell *matCellDef="let achievement">{{ achievement.id }}</td>
        </ng-container>

        <ng-container matColumnDef="username">
            <th mat-header-cell *matHeaderCellDef>username</th>
            <td mat-cell *matCellDef="let achievement">{{ achievement.username }}</td>
        </ng-container>

        <ng-container matColumnDef="type">
            <th mat-header-cell *matHeaderCellDef>Type</th>
            <td mat-cell *matCellDef="let achievement">{{ achievement.type }}</td>
        </ng-container>

        <ng-container matColumnDef="title">
            <th mat-header-cell *matHeaderCellDef>Title</th>
            <td mat-cell *matCellDef="let achievement">{{ achievement.title }}</td>
        </ng-container>

        <ng-container matColumnDef="description">
            <th mat-header-cell *matHeaderCellDef>Description</th>
            <td mat-cell *matCellDef="let achievement">{{ achievement.description }}</td>
        </ng-container>

        <ng-container matColumnDef="organization">
            <th mat-header-cell *matHeaderCellDef>Organization</th>
            <td mat-cell *matCellDef="let achievement">{{ achievement.organization }}</td>
        </ng-container>

        <ng-container matColumnDef="position">
            <th mat-header-cell *matHeaderCellDef>Position</th>
            <td mat-cell *matCellDef="let achievement">{{ achievement.position }}</td>
        </ng-container>

        <ng-container matColumnDef="participants">
            <th mat-header-cell *matHeaderCellDef>Number of team Members</th>
            <td mat-cell *matCellDef="let achievement">{{ achievement.participants }}</td>
        </ng-container>

        <ng-container matColumnDef="sharepoint">
            <th mat-header-cell *matHeaderCellDef> SharePoint </th>
            <td mat-cell *matCellDef="let achievement">
                <a *ngIf="achievement.sharepoint" [href]="achievement.sharepoint" target="_blank" rel="noopener noreferrer">
                Open Link
              </a>
            </td>
        </ng-container>

        <ng-container matColumnDef="eventDate">
            <th mat-header-cell *matHeaderCellDef>Event Date</th>
            <td mat-cell *matCellDef="let achievement">{{ achievement.eventDate | date }}</td>
        </ng-container>

        <ng-container matColumnDef="appliedDate">
            <th mat-header-cell *matHeaderCellDef>Applied Date</th>
            <td mat-cell *matCellDef="let achievement">{{ achievement.appliedDate | date:'short' }}</td>
        </ng-container>


        <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef>Status</th>
            <td mat-cell *matCellDef="let achievement">
                <mat-select [(value)]="achievement.status">
                    <mat-option value="approved">Approved</mat-option>
                    <mat-option value="rejected">Rejected</mat-option>
                </mat-select>
            </td>
        </ng-container>

        <ng-container matColumnDef="feedback">
            <th mat-header-cell *matHeaderCellDef>Feedback</th>
            <td mat-cell *matCellDef="let achievement">
                <textarea [(ngModel)]="achievement.feedback" placeholder="Enter feedback"></textarea>
            </td>
        </ng-container>

        <ng-container matColumnDef="grace_mark">
            <th mat-header-cell *matHeaderCellDef>Grace Mark Awarded</th>
            <td mat-cell *matCellDef="let achievement">{{ achievement.grace_marks_awarded }}</td>
        </ng-container>

        <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef>Action</th>
            <td mat-cell *matCellDef="let achievement">
                <button mat-raised-button color="primary" (click)="updateAchievement(achievement)" class="styled-button">
                    Save
                </button>

            </td>
        </ng-container>

        <!-- Table Footer -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
</div>